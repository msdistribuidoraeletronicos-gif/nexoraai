<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NexoraAI - Painel de Conte√∫do</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="./css/nexoraai-panel.css">

  <style>
    :root {
      /* 60-30-10 */
      --page-bg: #f4f5fb;           /* 60% ‚Äì fundo neutro geral */
      --shell-bg: #ffffff;          /* cart√µes / caixas principais */
      --shell-subtle: #e5e7eb;      /* divis√≥rias suaves */

      --ink-main: #0f172a;          /* texto principal */
      --ink-soft: #6b7280;          /* texto secund√°rio */
      --ink-mute: #9ca3af;          /* texto de apoio */

      --nav-bg-1: #020617;          /* 30% ‚Äì estrutura: sidebar */
      --nav-bg-2: #0b1020;

      --accent: #f97316;            /* 10% ‚Äì a√ß√£o principal (Von Restorff) */
      --accent-strong: #ea580c;
      --accent-soft: #ffedd5;

      --success: #22c55e;
      --danger: #ef4444;
      --info: #3b82f6;
      --warning: #eab308;

      --radius-xl: 1.25rem;
      --radius-lg: 0.9rem;

      --shadow-soft: 0 12px 30px rgba(15, 23, 42, 0.08);
      --shadow-strong: 0 22px 45px rgba(15, 23, 42, 0.16);
    }

    /* ===========================
       BASE / TIPOGRAFIA
    ============================ */
    body {
      font-family: 'Inter', sans-serif;
      color: var(--ink-main);
      background:
        radial-gradient(1200px 800px at 20% 10%, #e0f2fe 0%, transparent 55%),
        radial-gradient(1000px 700px at 90% 0%, #eef2ff 0%, transparent 50%),
        linear-gradient(to bottom, #f8fafc, #e2e8f0);
    }

    h1, h2, h3, .kpi-number {
      font-family: 'Space Grotesk', system-ui, -apple-system, BlinkMacSystemFont, 'Inter', sans-serif;
      letter-spacing: -0.03em;
    }

    /* Affordance forte: tudo que √© clic√°vel parece clic√°vel */
    button,
    [role="button"],
    .sidebar-item,
    .card-clickable {
      cursor: pointer;
      transition:
        transform 0.16s ease,
        box-shadow 0.18s ease,
        background 0.18s ease,
        border-color 0.18s ease,
        opacity 0.15s ease,
        filter 0.15s ease;
    }

    button:active,
    [role="button"]:active,
    .sidebar-item:active,
    .card-clickable:active {
      transform: translateY(1px) scale(0.99);
      box-shadow: 0 10px 25px rgba(15, 23, 42, 0.20);
    }

    /* Campos com cara de ‚Äúescreva aqui‚Äù */
    input[type="text"],
    input[type="email"],
    input[type="password"],
    select,
    textarea {
      border-radius: var(--radius-xl);
      border: 1px solid #d1d5db;
      background-color: #ffffff;
      transition:
        border-color 0.16s ease,
        box-shadow 0.16s ease,
        background-color 0.16s ease;
    }

    input:focus,
    select:focus,
    textarea:focus {
      outline: none;
      border-color: #4f46e5;
      box-shadow: 0 0 0 1px rgba(79, 70, 229, 0.5), 0 16px 30px rgba(15, 23, 42, 0.18);
      background-color: #f9fafb;
    }

    ::placeholder {
      color: #9ca3af;
    }

    /* ===========================
       CARDS PRINCIPAIS
    ============================ */
    .card {
      background-color: var(--shell-bg);
      border-radius: var(--radius-xl);
      box-shadow: 0 10px 24px rgba(15, 23, 42, 0.04);
      border: 1px solid rgba(148, 163, 184, 0.45);
    }

    .card:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-soft);
      border-color: rgba(79, 70, 229, 0.30);
      background: radial-gradient(circle at top left, #ffffff, #f9fafb);
    }

    .kpi-number {
      font-size: 2.4rem;
      line-height: 1;
    }

    /* ===========================
       SIDEBAR DESKTOP
    ============================ */
    .sidebar-desktop-only {
      background: radial-gradient(circle at 0% 0%, var(--nav-bg-2), var(--nav-bg-1));
      box-shadow: 10px 0 30px rgba(15, 23, 42, 0.35);
    }

    .sidebar-item {
      border-radius: 999px;
      border: 1px solid transparent;
      padding: 0.65rem 0.9rem;
      background: transparent;
    }

    .sidebar-item > span {
      width: 2.7rem;
      height: 2.7rem;
      border-radius: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at 30% 0%, rgba(129, 140, 248, 0.9), #020617);
      border: 1px solid rgba(129, 140, 248, 0.5);
      box-shadow: 0 12px 25px rgba(15, 23, 42, 0.9);
      flex-shrink: 0;
    }

    .sidebar-item > span i {
      font-size: 1.1rem;
    }

    .sidebar-item:hover {
      background: rgba(15, 23, 42, 0.85);
      border-color: rgba(148, 163, 184, 0.4);
      transform: translateX(4px);
      box-shadow: 0 16px 36px rgba(15, 23, 42, 0.7);
    }

    .sidebar-item.active {
      background: radial-gradient(circle at top left, rgba(79, 70, 229, 0.7), rgba(15, 23, 42, 1));
      border-color: rgba(129, 140, 248, 0.95);
      box-shadow: 0 20px 45px rgba(15, 23, 42, 0.95);
    }

    .badge-soft {
      border-radius: 999px;
      padding: 0.18rem 0.7rem;
      font-size: 0.7rem;
      font-weight: 500;
      background: rgba(15, 23, 42, 0.8);
      border: 1px solid rgba(148, 163, 184, 0.4);
    }

    .user-avatar {
      background: conic-gradient(from 210deg, #4f46e5, #6366f1, #ec4899, #f97316, #22c55e, #4f46e5);
      padding: 1px;
      border-radius: 20px;
    }

    .user-avatar-inner {
      border-radius: 18px;
      background: radial-gradient(circle at 30% 0%, #1f2937, #020617);
    }

    /* ===========================
       BOT√ïES (Von Restorff)
    ============================ */
    .btn-accent {
      background: linear-gradient(135deg, var(--accent), var(--accent-strong));
      color: #fff;
      border-radius: 999px;
      padding: 0.6rem 1.5rem;
      font-weight: 600;
      font-size: 0.875rem;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.4rem;
      box-shadow: 0 18px 40px rgba(234, 88, 12, 0.40);
      border: none;
      white-space: nowrap;
    }

    .btn-accent:hover {
      filter: brightness(1.03);
      transform: translateY(-1px);
      box-shadow: 0 22px 50px rgba(234, 88, 12, 0.55);
    }

    .btn-accent:active {
      transform: translateY(1px) scale(0.97);
      box-shadow: 0 12px 25px rgba(234, 88, 12, 0.6);
    }

    .btn-accent i {
      font-size: 0.9rem;
    }

    .btn-ghost {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      padding: 0.45rem 0.95rem;
      font-size: 0.75rem;
      font-weight: 500;
      background: rgba(248, 250, 252, 0.95);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.35rem;
    }

    .btn-ghost:hover {
      background: #e5edff;
      box-shadow: 0 10px 24px rgba(148, 163, 184, 0.5);
      transform: translateY(-1px);
    }

    .content-type-btn {
      border-radius: 999px;
      background: #f9fafb;
      border-color: #e5e7eb;
    }

    .content-type-btn:hover {
      background: #eef2ff;
      border-color: #4f46e5;
      box-shadow: 0 10px 22px rgba(79, 70, 229, 0.25);
    }

    .content-type-btn.active {
      background: #4f46e5;
      color: #eef2ff;
      border-color: #4338ca;
      box-shadow: 0 16px 32px rgba(79, 70, 229, 0.45);
    }

    /* ===========================
       PREVIEW / RESULTADOS
    ============================ */
    .preview-container {
      border-radius: 1.5rem;
      border: 1px solid rgba(148, 163, 184, 0.45);
      background: radial-gradient(circle at top, #f9fafb, #e5e7eb);
      padding: 0.7rem;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 260px;
    }

    .preview-img {
      border-radius: 1.3rem;
      max-width: 100%;
      height: auto;
      display: block;
      box-shadow: 0 20px 40px rgba(15, 23, 42, 0.25);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .preview-img:hover {
      transform: translateY(-4px) scale(1.01);
      box-shadow: var(--shadow-strong);
    }

    /* Skeleton */
    @keyframes skeletonPulse {
      0% { background-position: -200px 0; }
      100% { background-position: 200px 0; }
    }

    .skeleton {
      background: linear-gradient(90deg, #e5e7eb 25%, #f3f4f6 37%, #e5e7eb 63%);
      background-size: 400px 100%;
      border-radius: 999px;
      animation: skeletonPulse 1.4s ease-in-out infinite;
    }

    .skeleton-rect {
      border-radius: 1rem;
    }

    .skeleton-text {
      height: 0.7rem;
      margin-bottom: 0.45rem;
    }

    /* API Status pill */
    #apiStatus {
      font-size: 0.7rem;
      border-radius: 999px;
      padding: 0.2rem 0.6rem;
      border: 1px solid rgba(148, 163, 184, 0.45);
      background: rgba(15, 23, 42, 0.9);
      color: #e5e7eb;
    }

    /* HEADER */
    header {
      background: rgba(255, 255, 255, 0.92);
      backdrop-filter: blur(18px);
    }

    header h2 {
      letter-spacing: -0.02em;
    }

    .mobile-user-chip {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.45);
      padding: 0.4rem 0.7rem;
      background: rgba(255, 255, 255, 0.98);
    }

    /* BARRA DE PROGRESSO */
    .progress-shell {
      width: 100%;
      border-radius: 999px;
      background: #e5e7eb;
      height: 0.45rem;
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      border-radius: 999px;
      background: linear-gradient(90deg, #22c55e, #16a34a);
      width: 60%;
      box-shadow: 0 0 0 1px rgba(22, 163, 74, 0.4);
    }

    /* SE√á√ïES / LAYOUT */
    main {
      background: var(--page-bg);
    }

    section {
      scroll-margin-top: 80px;
    }

    .dropzone {
      border-radius: 1.25rem;
      border-style: dashed;
      border-width: 2px;
      border-color: #cbd5f5;
      background: #f4f5ff;
    }

    .dropzone:hover {
      border-color: #4f46e5;
      background: #eef2ff;
      box-shadow: 0 16px 34px rgba(79, 70, 229, 0.22);
      transform: translateY(-1px);
    }

    .hint-box {
      border-radius: 1rem;
      background: #eff6ff;
      border: 1px solid #bfdbfe;
      padding: 0.75rem 1rem;
      font-size: 0.75rem;
      color: #1e3a8a;
    }

    .feature-panel {
      border-radius: 1.5rem;
      box-shadow: var(--shadow-soft);
      position: relative;
      overflow: hidden;
    }

    .feature-panel::before {
      content: "";
      position: absolute;
      inset: -40%;
      background: radial-gradient(circle at 0 0, rgba(255, 255, 255, 0.16), transparent 55%);
      pointer-events: none;
    }

    /* Step pills ‚Äì Progressive Disclosure visual */
    .steps-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      font-size: 0.7rem;
    }

    .step-pill {
      border-radius: 999px;
      padding: 0.25rem 0.7rem;
      border: 1px dashed rgba(148, 163, 184, 0.7);
      background: #f9fafb;
      color: #6b7280;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
    }

    .step-pill strong {
      font-weight: 600;
      color: #0f172a;
    }

    .step-pill-active {
      border-style: solid;
      border-color: #4f46e5;
      background: #eef2ff;
      color: #111827;
    }

    /* Bottom nav micro-interactions */
    .nav-mobile-btn {
      transition: transform 0.12s ease, background 0.15s ease;
    }

    .nav-mobile-btn span:first-child {
      transition: transform 0.12s ease, box-shadow 0.15s ease;
    }

    .nav-mobile-btn:active span:first-child {
      transform: scale(0.9);
      box-shadow: 0 0 0 1px rgba(148, 163, 184, 0.6);
    }

    @media (max-width: 1023.98px) {
      .sidebar-desktop-only {
        display: none !important;
      }
    }
  </style>
</head>

<body class="min-h-screen bg-slate-50 flex flex-col lg:flex-row text-slate-900">

  <!-- SIDEBAR DESKTOP -->
  <aside class="hidden lg:flex lg:w-72 text-slate-300 flex-col relative z-50 flex-shrink-0 sidebar-desktop-only">
    <div class="p-4 sm:p-6 border-b border-slate-800/70">
      <button
        type="button"
        onclick="goBackToDashboard()"
        class="flex items-center gap-3 w-full text-left focus:outline-none"
        aria-label="Voltar para o Dashboard"
      >
        <div class="user-avatar w-10 h-10 rounded-2xl flex items-center justify-center">
          <div class="user-avatar-inner w-full h-full flex items-center justify-center border border-indigo-500/40">
            <i class="fa-solid fa-layer-group text-indigo-200 text-lg"></i>
          </div>
        </div>
        <div>
          <h1 class="text-lg font-bold text-white leading-tight">NexoraAI</h1>
          <p class="text-xs text-slate-400">Intelig√™ncia Estrat√©gica</p>
        </div>
      </button>
    </div>

    <nav class="flex-1 mt-4 px-3 overflow-y-auto">
      <p class="px-3 pb-2 text-[11px] uppercase tracking-wider text-slate-500">Navega√ß√£o</p>

      <ul class="space-y-1">
        <li data-section="dashboard" class="sidebar-item active px-4 py-3 flex items-center gap-3">
          <span>
            <i class="fa-solid fa-chart-pie text-slate-50"></i>
          </span>
          <div class="flex-1">
            <p class="text-sm font-semibold">Dashboard</p>
            <p class="text-xs text-slate-400">Vis√£o geral</p>
          </div>
          <i class="fa-solid fa-chevron-right text-slate-500 text-xs"></i>
        </li>

        <li data-section="create-mode" class="sidebar-item px-4 py-3 flex items-center gap-3">
          <span>
            <i class="fa-solid fa-pen-nib text-slate-50"></i>
          </span>
          <div class="flex-1">
            <p class="text-sm font-semibold">Criar Conte√∫do</p>
            <p class="text-xs text-slate-400">Gera√ß√£o guiada</p>
          </div>
          <i class="fa-solid fa-chevron-right text-slate-500 text-xs"></i>
        </li>

        <li data-section="brands" class="sidebar-item px-4 py-3 flex items-center gap-3">
          <span>
            <i class="fa-solid fa-briefcase text-slate-50"></i>
          </span>
          <div class="flex-1">
            <p class="text-sm font-semibold">Minhas Marcas</p>
            <p class="text-xs text-slate-400">Projetos e clientes</p>
          </div>
          <i class="fa-solid fa-chevron-right text-slate-500 text-xs"></i>
        </li>

        <li data-section="templates" class="sidebar-item px-4 py-3 flex items-center gap-3">
          <span>
            <i class="fa-solid fa-lightbulb text-slate-50"></i>
          </span>
          <div class="flex-1">
            <p class="text-sm font-semibold">Sugest√µes</p>
            <p class="text-xs text-slate-400">Campanhas autom√°ticas</p>
          </div>
          <i class="fa-solid fa-chevron-right text-slate-500 text-xs"></i>
        </li>

        <li data-section="history" class="sidebar-item px-4 py-3 flex items-center gap-3">
          <span>
            <i class="fa-solid fa-clock-rotate-left text-slate-50"></i>
          </span>
          <div class="flex-1">
            <p class="text-sm font-semibold">Hist√≥rico</p>
            <p class="text-xs text-slate-400">Gera√ß√µes passadas</p>
          </div>
          <i class="fa-solid fa-chevron-right text-slate-500 text-xs"></i>
        </li>

        <li data-section="profile" class="sidebar-item px-4 py-3 flex items-center gap-3">
          <span>
            <i class="fa-regular fa-user text-slate-50"></i>
          </span>
          <div class="flex-1">
            <p class="text-sm font-semibold">Meu Perfil</p>
            <p class="text-xs text-slate-400">Dados do usu√°rio</p>
          </div>
          <i class="fa-solid fa-chevron-right text-slate-500 text-xs"></i>
        </li>

        <li data-section="billing" class="sidebar-item px-4 py-3 flex items-center gap-3">
          <span>
            <i class="fa-regular fa-credit-card text-slate-50"></i>
          </span>
          <div class="flex-1">
            <p class="text-sm font-semibold">Assinatura</p>
            <p class="text-xs text-slate-400">Plano e teste</p>
          </div>
          <i class="fa-solid fa-chevron-right text-slate-500 text-xs"></i>
        </li>
      </ul>
    </nav>

    <div class="p-4 border-t border-slate-800/70 relative">
      <div class="flex items-center gap-3">
        <div class="user-avatar w-10 h-10 rounded-2xl flex items-center justify-center">
          <div class="user-avatar-inner w-full h-full flex items-center justify-center text-white font-bold shadow-sm">
            U
          </div>
        </div>
        <div class="flex-1">
          <p class="text-sm font-semibold text-white leading-tight max-w-[140px] truncate" data-user-name>Usu√°rio</p>
          <p id="planLabel" class="text-xs text-slate-400">NexoraAI Pro</p>
        </div>
        <button
          id="userSettingsBtn"
          class="w-9 h-9 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 text-slate-200 cursor-pointer"
          title="Configura√ß√µes"
          type="button"
        >
          <i class="fa-solid fa-gear"></i>
        </button>
      </div>

      <div class="mt-4 flex items-center justify-between text-xs text-slate-400">
        <span>API:</span>
        <span id="apiStatus">checando...</span>
      </div>

      <div
        id="userProfilePanel"
        class="hidden absolute left-4 right-4 bottom-20 bg-slate-900/95 border border-slate-700 rounded-2xl p-4 shadow-2xl text-slate-100 z-50 backdrop-blur-sm"
      >
        <div class="flex items-center gap-3 mb-3">
          <div class="user-avatar w-9 h-9 rounded-2xl flex items-center justify-center">
            <div class="user-avatar-inner w-full h-full flex items-center justify-center text-white font-bold shadow-sm">
              U
            </div>
          </div>
          <div class="flex-1">
            <p class="text-sm font-semibold leading-tight max-w-[180px] truncate" data-user-name>Usu√°rio</p>
            <p id="planLabelProfile" class="text-[11px] text-slate-400">NexoraAI Pro</p>
          </div>
        </div>

        <div class="space-y-2 text-sm">
          <button
            type="button"
            id="btnProfile"
            class="w-full flex items-center gap-2 px-3 py-2 rounded-xl hover:bg-slate-800 text-left transition-colors"
          >
            <i class="fa-regular fa-user text-slate-300 w-5"></i>
            <span>Meu perfil</span>
          </button>

          <button
            type="button"
            id="btnBilling"
            class="w-full flex items-center gap-2 px-3 py-2 rounded-xl hover:bg-slate-800 text-left transition-colors"
          >
            <i class="fa-regular fa-credit-card text-slate-300 w-5"></i>
            <span>Assinatura</span>
          </button>

          <div class="h-px bg-slate-700/50 my-1"></div>

          <button
            type="button"
            id="btnLogout"
            class="w-full flex items-center gap-2 px-3 py-2 rounded-xl hover:bg-red-900/30 text-red-300 hover:text-red-200 text-left transition-colors"
          >
            <i class="fa-solid fa-arrow-right-from-bracket w-5"></i>
            <span>Sair da conta</span>
          </button>
        </div>
      </div>
    </div>
  </aside>

  <!-- MAIN -->
  <main class="flex-1 flex flex-col overflow-y-auto relative pb-20 lg:pb-0">
    <header class="sticky top-0 z-20 border-b border-slate-200/70">
      <div class="px-4 sm:px-8 py-3 sm:py-4 flex items-center justify-between gap-4">
        <div>
          <p class="text-xs text-slate-500">Bem-vindo de volta</p>
          <h2 class="text-lg font-bold text-slate-800">Painel NexoraAI</h2>
        </div>
        <button onclick="openSuggestionAuto()" class="btn-accent text-xs sm:text-sm">
          <i class="fa-solid fa-wand-magic-sparkles"></i>
          Sugest√£o autom√°tica
        </button>
      </div>

      <!-- Barra de usu√°rio mobile -->
      <div class="px-4 sm:px-8 pb-3 flex items-center justify-between gap-3 lg:hidden">
        <div class="flex items-center gap-3 mobile-user-chip">
          <div class="user-avatar w-8 h-8 rounded-2xl flex items-center justify-center">
            <div class="user-avatar-inner w-full h-full flex items-center justify-center text-white font-bold shadow-sm text-xs">
              U
            </div>
          </div>
          <div>
            <p class="text-[11px] text-slate-500">Logado como</p>
            <p class="text-sm font-semibold text-slate-900 max-w-[160px] truncate" data-user-name>Usu√°rio</p>
          </div>
        </div>
        <button
          type="button"
          class="w-9 h-9 rounded-xl bg-slate-900 text-white flex items-center justify-center shadow-sm"
          title="Meu perfil"
          onclick="openProfileFromMobile()"
        >
          <i class="fa-solid fa-gear text-sm"></i>
        </button>
      </div>
    </header>

    <!-- DASHBOARD -->
    <section id="dashboard" class="p-4 sm:p-6 lg:p-8">
      <div class="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-6">
        <div>
          <h2 class="text-2xl font-bold text-slate-900">Painel Central</h2>
          <p class="text-sm text-slate-600">Resumo de performance e pr√≥ximos passos.</p>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8">
        <div class="card bg-white p-6">
          <div class="flex items-center justify-between">
            <p class="text-slate-500 text-sm">Conte√∫dos este m√™s</p>
            <span class="w-10 h-10 rounded-2xl bg-indigo-600/10 border border-indigo-500/15 flex items-center justify-center">
              <i class="fa-solid fa-bolt text-indigo-600"></i>
            </span>
          </div>
          <p id="statContentsMonth" class="mt-3 kpi-number font-bold text-slate-900">0</p>
          <p class="text-xs text-slate-500 mt-1">Baseado no uso deste navegador</p>
        </div>

        <div class="card bg-white p-6">
          <div class="flex items-center justify-between">
            <p class="text-slate-500 text-sm">Marcas ativas</p>
            <span class="w-10 h-10 rounded-2xl bg-emerald-600/10 border border-emerald-500/15 flex items-center justify-center">
              <i class="fa-solid fa-briefcase text-emerald-600"></i>
            </span>
          </div>
          <p id="statBrands" class="mt-3 kpi-number font-bold text-slate-900">0</p>
          <p class="text-xs text-slate-500 mt-1">Cadastradas</p>
        </div>

        <div class="card bg-white p-6">
          <div class="flex items-center justify-between">
            <p class="text-slate-500 text-sm">Gera√ß√µes feitas</p>
            <span class="w-10 h-10 rounded-2xl bg-blue-600/10 border border-blue-500/15 flex items-center justify-center">
              <i class="fa-solid fa-microchip text-blue-600"></i>
            </span>
          </div>
          <p id="statGenerations" class="mt-3 kpi-number font-bold text-slate-900">0</p>
          <p class="text-xs text-slate-500 mt-1">Total</p>
        </div>

        <div id="autoIdeaBox" class="card feature-panel p-6 bg-gradient-to-br from-indigo-600 to-purple-700 text-white flex flex-col justify-center items-start">
          <div class="relative z-10">
            <h3 class="font-bold mb-3 flex items-center gap-2 text-lg">
              <i class="fa-solid fa-lightbulb"></i> Ideia autom√°tica
            </h3>
            <p class="text-xs sm:text-sm opacity-95 mb-4 leading-relaxed">
              Deixe a IA analisar o m√™s atual e criar uma campanha estrat√©gica completa para sua marca agora.
            </p>
            <button onclick="openSuggestionAuto()" class="btn-accent text-xs sm:text-sm bg-white text-slate-900">
              <i class="fa-solid fa-bolt"></i>
              Gerar sugest√£o
            </button>
          </div>
        </div>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <div class="card bg-white p-6">
          <div class="flex items-center justify-between mb-4">
            <h3 class="font-bold text-slate-800">√öltimo conte√∫do</h3>
          </div>
          <div>
            <p id="statLastType" class="text-lg font-bold text-slate-900 mb-1">‚Äî</p>
            <p id="statLastBrand" class="text-xs text-slate-500">‚Äî</p>
          </div>
        </div>

        <div class="card bg-white p-6">
          <div class="flex items-center justify-between mb-4">
            <h3 class="font-bold text-slate-800">√öltimos conte√∫dos gerados</h3>
          </div>
          <ul id="recentList" class="space-y-3">
            <li class="text-sm text-slate-500">Nenhum conte√∫do gerado ainda.</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- MINHAS MARCAS -->
    <section id="brands" class="p-4 sm:p-6 lg:p-8 hidden-section">
      <div class="mb-6 flex items-center justify-between gap-3">
        <div>
          <h2 class="text-2xl font-bold text-slate-900">Minhas Marcas</h2>
          <p class="text-sm text-slate-600">Cadastre cada marca para evitar conte√∫do gen√©rico.</p>
        </div>
        <button
          type="button"
          onclick="goBackToDashboard()"
          class="inline-flex items-center text-xs sm:text-sm text-slate-600 hover:text-slate-900 bg-slate-100 hover:bg-slate-200 px-3 py-2 rounded-2xl"
        >
          <i class="fa-solid fa-arrow-left mr-2"></i> Voltar ao painel
        </button>
      </div>

      <div class="grid grid-cols-1 xl:grid-cols-2 gap-6">
        <div class="card bg-white p-6">
          <div class="flex items-center justify-between gap-4 border-b pb-4 mb-4 border-slate-200">
            <div>
              <h3 class="text-lg font-semibold text-slate-900">
                <span class="text-indigo-600">Cadastrar</span> nova marca
              </h3>
              <p class="text-xs text-slate-500 mt-1">Complete as informa√ß√µes em 3 passos.</p>
            </div>
            <span class="text-xs text-slate-500 bg-slate-50 border border-slate-200 px-3 py-1 rounded-full">
              Configura√ß√£o estrat√©gica
            </span>
          </div>

          <div class="steps-row mb-4">
            <div class="step-pill step-pill-active">
              <strong>Passo 1</strong> Dados b√°sicos
            </div>
            <div class="step-pill">
              <strong>Passo 2</strong> P√∫blico e tom
            </div>
            <div class="step-pill">
              <strong>Passo 3</strong> Objetivo da comunica√ß√£o
            </div>
          </div>

          <form id="brandForm" class="space-y-4" onsubmit="return false;">
            <div>
              <p class="text-xs text-slate-500 mb-1">Passo 1 de 3</p>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label class="block text-sm font-medium text-slate-700">Nome da Marca</label>
                  <input id="brandName" type="text" class="mt-1 block w-full p-3" placeholder="Ex: Restaurante Marineis">
                </div>
                <div>
                  <label class="block text-sm font-medium text-slate-700">Nicho / Segmento</label>
                  <input id="brandNiche" type="text" class="mt-1 block w-full p-3" placeholder="Ex: Restaurante, Loja de Roupas...">
                </div>
              </div>
            </div>

            <div>
              <p class="text-xs text-slate-500 mb-1">Passo 2 de 3</p>
              <label class="block text-sm font-medium text-slate-700">P√∫blico-alvo</label>
              <textarea id="brandAudience" class="mt-1 block w-full p-3" rows="3" placeholder="Ex: Fam√≠lias da regi√£o, classe m√©dia..."></textarea>
            </div>

            <div>
              <p class="text-xs text-slate-500 mb-1">Passo 3 de 3</p>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label class="block text-sm font-medium text-slate-700">Tom de Voz</label>
                  <select id="brandTone" class="mt-1 block w-full p-3">
                    <option>Profissional</option>
                    <option>Informal</option>
                    <option>Autoridade</option>
                    <option>Humanizado</option>
                    <option>Persuasivo</option>
                  </select>
                </div>
                <div>
                  <label class="block text-sm font-medium text-slate-700">Objetivo Principal</label>
                  <select id="brandGoal" class="mt-1 block w-full p-3">
                    <option>Vender</option>
                    <option>Gerar Autoridade</option>
                    <option>Engajar</option>
                  </select>
                </div>
              </div>
            </div>

            <button type="button" onclick="saveBrand()" class="w-full btn-accent justify-center mt-4">
              <i class="fa-solid fa-check"></i> Salvar Marca
            </button>
          </form>
        </div>

        <div class="card bg-white p-6">
          <div class="flex items-center justify-between mb-4">
            <h3 class="font-bold text-slate-800">Marcas cadastradas</h3>
            <button type="button" onclick="clearBrands()" class="text-xs px-3 py-2 rounded-xl bg-slate-50 border border-slate-200 hover:bg-slate-100">
              <i class="fa-solid fa-trash"></i> Limpar tudo
            </button>
          </div>
          <ul id="brandList" class="space-y-3">
            <li class="text-sm text-slate-500">Nenhuma marca cadastrada ainda.</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- SUGEST√ïES -->
    <section id="templates" class="p-4 sm:p-6 lg:p-8 hidden-section">
      <div class="mb-6 flex items-center justify-between gap-3">
        <div>
          <h2 class="text-2xl font-bold text-slate-900">Sugest√µes Estrat√©gicas</h2>
          <p class="text-sm text-slate-600">
            Ideias autom√°ticas baseadas no m√™s atual e na cultura brasileira.
          </p>
        </div>
        <button
          type="button"
          onclick="goBackToDashboard()"
          class="inline-flex items-center text-xs sm:text-sm text-slate-600 hover:text-slate-900 bg-slate-100 hover:bg-slate-200 px-3 py-2 rounded-2xl"
        >
          <i class="fa-solid fa-arrow-left mr-2"></i> Voltar ao painel
        </button>
      </div>

      <div class="feature-panel flex flex-col items-center justify-center min-h-[320px] sm:min-h-[400px] bg-white p-6 sm:p-8 rounded-2xl border border-slate-200 text-center max-w-3xl mx-auto">
        <div class="w-16 h-16 sm:w-20 sm:h-20 bg-indigo-50 text-indigo-600 rounded-full flex items-center justify-center mb-6 text-2xl sm:text-3xl shadow-sm border border-indigo-100">
          <i class="fa-solid fa-wand-magic-sparkles"></i>
        </div>
        
        <h3 class="text-xl sm:text-2xl font-bold text-slate-900 mb-3">Gerador de Campanhas Inteligente</h3>
        
        <p class="text-slate-600 mb-8 max-w-lg leading-relaxed text-sm sm:text-base">
          O sistema analisa o m√™s atual, feriados, datas comemorativas e o perfil da sua marca para criar um briefing completo e gerar a imagem automaticamente.
        </p>
        
        <button onclick="openSuggestionAuto()" class="btn-accent text-sm sm:text-lg">
          <i class="fa-solid fa-bolt"></i>
          Gerar sugest√£o agora
        </button>
      </div>
    </section>

    <!-- HIST√ìRICO -->
    <section id="history" class="p-4 sm:p-6 lg:p-8 hidden-section">
      <div class="mb-6 flex items-center justify-between gap-3">
        <div>
          <h2 class="text-2xl font-bold text-slate-900">Hist√≥rico</h2>
          <p class="text-sm text-slate-600">Veja e recarregue conte√∫dos gerados anteriormente.</p>
        </div>
        <button
          type="button"
          onclick="goBackToDashboard()"
          class="inline-flex items-center text-xs sm:text-sm text-slate-600 hover:text-slate-900 bg-slate-100 hover:bg-slate-200 px-3 py-2 rounded-2xl"
        >
          <i class="fa-solid fa-arrow-left mr-2"></i> Voltar ao painel
        </button>
      </div>

      <div class="card bg-white p-6">
        <div class="flex items-center justify-between mb-4">
          <h3 class="font-bold text-slate-800">Gera√ß√µes</h3>
          <button type="button" onclick="clearHistory()" class="text-xs px-3 py-2 rounded-xl bg-slate-50 border border-slate-200 hover:bg-slate-100">
            <i class="fa-solid fa-trash"></i> Limpar hist√≥rico
          </button>
        </div>
        <ul id="historyList" class="space-y-3">
          <li class="text-sm text-slate-500">Nenhum conte√∫do ainda.</li>
        </ul>
      </div>
    </section>

    <!-- CRIAR CONTE√öDO (ESCOLHA TIPO) -->
    <section id="create-mode" class="p-4 sm:p-6 lg:p-8 hidden-section">
      <div class="mb-6 flex items-center justify-between gap-3">
        <div>
          <h2 class="text-2xl font-bold text-slate-900">Criar conte√∫do</h2>
          <p class="text-sm text-slate-600">Escolha se o conte√∫do ser√° para uso comercial (empresas, marcas) ou pessoal.</p>
        </div>
        <button
          type="button"
          onclick="goBackToDashboard()"
          class="inline-flex items-center text-xs sm:text-sm text-slate-600 hover:text-slate-900 bg-slate-100 hover:bg-slate-200 px-3 py-2 rounded-2xl"
        >
          <i class="fa-solid fa-arrow-left mr-2"></i> Voltar ao painel
        </button>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl">
        <button type="button" onclick="openCreateCommercial()" class="card bg-white p-6 text-left hover:border-indigo-500/60 card-clickable">
          <div class="flex items-center gap-4 mb-3">
            <div class="w-12 h-12 rounded-2xl bg-indigo-50 border border-indigo-200 flex items-center justify-center">
              <i class="fa-solid fa-briefcase text-indigo-600 text-xl"></i>
            </div>
            <div>
              <h3 class="text-lg font-bold text-slate-900">Comercial</h3>
              <p class="text-sm text-slate-600">Para empresas, marcas, clientes, neg√≥cios locais, etc.</p>
            </div>
          </div>
          <p class="text-xs text-slate-500">
            Usa a p√°gina de cria√ß√£o atual, com marca, objetivos, briefing e gera√ß√£o completa de post.
          </p>
        </button>

        <button type="button" onclick="openCreatePersonal()" class="card bg-white p-6 text-left hover:border-purple-500/60 card-clickable">
          <div class="flex items-center gap-4 mb-3">
            <div class="w-12 h-12 rounded-2xl bg-purple-50 border border-purple-200 flex items-center justify-center">
              <i class="fa-solid fa-user text-purple-600 text-xl"></i>
            </div>
            <div>
              <h3 class="text-lg font-bold text-slate-900">Pessoal</h3>
              <p class="text-sm text-slate-600">Para posts pessoais, hobbies, fotos pr√≥prias, desabafos, etc.</p>
            </div>
          </div>
          <p class="text-xs text-slate-500">
            Vai abrir uma nova p√°gina de cria√ß√£o pessoal.
          </p>
        </button>
      </div>
    </section>

    <!-- CRIAR CONTE√öDO PESSOAL -->
    <section id="create-personal" class="p-4 sm:p-6 lg:p-8 hidden-section">
      <div class="mb-6 flex items-center justify-between gap-3">
        <div>
          <h2 class="text-2xl font-bold text-slate-900">Criar conte√∫do pessoal</h2>
          <p class="text-sm text-slate-600">
            Escolha o tipo de arte pessoal, defina o objetivo e o que voc√™ quer comunicar. A IA entrega arte + legenda.
          </p>
        </div>
        <button
          type="button"
          onclick="goBackToDashboard()"
          class="inline-flex items-center text-xs sm:text-sm text-slate-600 hover:text-slate-900 bg-slate-100 hover:bg-slate-200 px-3 py-2 rounded-2xl"
        >
          <i class="fa-solid fa-arrow-left mr-2"></i> Voltar ao painel
        </button>
      </div>

      <div class="flex flex-col xl:flex-row gap-8">
        <div class="w-full xl:w-1/2 space-y-6">
          <div class="card bg-white p-5">
            <div class="flex items-center justify-between mb-3">
              <label class="block text-sm font-bold text-slate-800">1. Tipo de conte√∫do pessoal</label>
              <span class="text-[11px] text-slate-500">Passo 1 de 4</span>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
              <select id="personalTypeSelect" class="w-full p-3">
                <option value="">Selecione o tipo de conte√∫do...</option>
                <!-- op√ß√µes mantidas -->
                <option>Flyer de anivers√°rio infantil</option>
                <option>Flyer de anivers√°rio adulto</option>
                <option>Convite de anivers√°rio simples</option>
                <option>Convite de casamento</option>
                <option>Convite de ch√° revela√ß√£o</option>
                <option>Convite de ch√° de beb√™</option>
                <option>Convite de formatura</option>
                <option>Convite de noivado</option>
                <option>Convite de confraterniza√ß√£o em fam√≠lia</option>
                <option>Convite para culto / celebra√ß√£o religiosa</option>
                <option>Banner de anivers√°rio</option>
                <option>Banner de formatura</option>
                <option>Banner de evento familiar</option>
                <option>Cart√£o de visita pessoal</option>
                <option>Cart√£o de agradecimento</option>
                <option>Cart√£o de felicita√ß√µes</option>
                <option>Cart√£o de Natal</option>
                <option>Cart√£o de Ano Novo</option>
                <option>Cart√£o do Dia das M√£es</option>
                <option>Cart√£o do Dia dos Pais</option>
                <option>Post pessoal para Instagram</option>
                <option>Post de selfie com frase</option>
                <option>Post de reflex√£o</option>
                <option>Post de f√© / mensagem b√≠blica</option>
                <option>Post de relacionamento (casal)</option>
                <option>Post de viagem</option>
                <option>Post de conquista pessoal</option>
                <option>Story de anivers√°rio</option>
                <option>Story de contagem regressiva</option>
                <option>Story para divulga√ß√£o de evento pessoal</option>
                <option>Capa para destaques do Instagram</option>
                <option>Capa para Reels</option>
                <option>Capa para v√≠deo do TikTok</option>
                <option>Thumbnail para canal pessoal no YouTube</option>
                <option>Wallpaper para celular</option>
                <option>Wallpaper para computador</option>
                <option>Logo pessoal (assinatura)</option>
                <option>Logo para canal no YouTube</option>
                <option>Logo para projeto pessoal</option>
                <option>Certificado simb√≥lico</option>
                <option>Lembrancinha digital</option>
                <option>Tag para lembrancinha</option>
                <option>Convite digital para WhatsApp</option>
                <option>Save the date</option>
                <option>Layout de curr√≠culo</option>
                <option>Cart√£o digital de contato</option>
                <option>Capa para Facebook pessoal</option>
                <option>Capa para LinkedIn pessoal</option>
                <option>Banner para status do WhatsApp</option>
                <option>Flyer para bazar / desapegos</option>
              </select>
              <input id="personalTypeCustom" type="text" class="w-full p-3" placeholder="Ou escreva aqui o tipo de conte√∫do desejado">
            </div>
            <p id="personalTypeHint" class="text-xs text-slate-500 mt-2">
              Se n√£o encontrar na lista, escreva no campo ao lado.
            </p>
          </div>

          <div class="card bg-white p-5 space-y-4">
            <div class="flex items-center justify-between">
              <label class="block text-sm font-bold text-slate-800">2. Objetivo</label>
              <span class="text-[11px] text-slate-500">Passo 2 de 4</span>
            </div>
            <div>
              <select id="personalObjectiveSelect" class="w-full p-3">
                <option>Compartilhar momento</option>
                <option>Convidar pessoas</option>
                <option>Agradecer</option>
                <option>Homenagear algu√©m</option>
                <option>Motivar / inspirar</option>
              </select>
            </div>
          </div>

          <div class="card bg-white p-5">
            <div class="flex items-center justify-between mb-2">
              <label class="block text-sm font-bold text-slate-800">3. Briefing: O que comunicar?</label>
              <span class="text-[11px] text-slate-500">Passo 3 de 4</span>
            </div>
            <textarea id="personalBriefingInput" class="w-full p-4" rows="5" placeholder="Ex: Convite de anivers√°rio de 15 anos da Marilidia, tema vermelho com dourado, data, hor√°rio e local."></textarea>
          </div>

          <div class="card bg-white p-5">
            <div class="flex items-center justify-between mb-2">
              <label class="block text-sm font-bold text-slate-800">4. Imagens de Refer√™ncia (Opcional)</label>
              <span class="text-[11px] text-slate-500">Passo 4 de 4</span>
            </div>
            <div class="p-4 dropzone text-center relative group">
              <input type="file" id="personalReferenceImages" name="personalReferenceImages" multiple accept="image/*" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10">
              <div class="pointer-events-none group-hover:scale-105 transition-transform">
                <i class="fa-solid fa-cloud-arrow-up text-2xl text-slate-400 mb-2"></i>
                <p class="text-sm text-slate-600 font-medium">Clique ou arraste at√© 3 imagens pessoais</p>
                <p class="text-xs text-slate-400 mt-1">Fotos, refer√™ncias de cores, prints de ideias...</p>
              </div>
            </div>
            <p id="personalFileStatus" class="text-xs text-blue-600 font-medium mt-2 text-center"></p>

            <div class="mt-4 flex items-start gap-3 p-3 bg-purple-50 rounded-xl border border-purple-100">
              <div class="flex h-6 items-center">
                <input id="personalRecreateCheck" type="checkbox" class="h-5 w-5 rounded border-slate-300 text-purple-600 focus:ring-purple-600">
              </div>
              <div class="text-sm">
                <label for="personalRecreateCheck" class="font-medium text-purple-900 cursor-pointer">Usar imagem como base (Recriar)</label>
                <p class="text-slate-600 text-xs">
                  A IA vai tentar copiar o cen√°rio, composi√ß√£o e elementos da foto enviada, apenas melhorando a qualidade.
                </p>
              </div>
            </div>
          </div>

          <button type="button" onclick="generatePersonalPost()" class="w-full btn-accent justify-center mt-2 text-sm sm:text-base">
            üåü Gerar Conte√∫do Pessoal
          </button>

          <p class="text-xs text-slate-500 mt-3">
            Dica: explique quem √© a pessoa, o tipo de evento e o clima que voc√™ quer (rom√¢ntico, divertido, formal...).
          </p>
        </div>

        <div class="w-full xl:w-1/2">
          <div id="personalResultArea" class="card bg-white h-full p-8 flex flex-col justify-center items-center text-center">
            <div class="text-slate-400">
              <div class="w-14 h-14 rounded-3xl bg-slate-50 border border-slate-200 flex items-center justify-center mx-auto mb-4">
                <i class="fa-solid fa-heart text-2xl"></i>
              </div>
              <p class="font-semibold text-slate-600">Aguardando briefing pessoal‚Ä¶</p>
              <p class="text-sm text-slate-500 mt-1">
                Preencha os dados e clique em <strong>Gerar Conte√∫do Pessoal</strong>.
              </p>
            </div>
          </div>

          <div id="personalFinalContent" class="hidden card bg-white h-full p-6">
            <div class="flex flex-wrap justify-between items-center gap-2 mb-4 border-b border-slate-200 pb-3">
              <h3 class="font-bold text-slate-800">Resultado gerado (pessoal)</h3>
              <div class="flex gap-2">
                <button type="button" onclick="copyCaptionPersonal()" class="btn-ghost">
                  <i class="fa-solid fa-copy mr-1"></i> Copiar legenda
                </button>
                <button type="button" onclick="downloadImagePersonal()" class="btn-ghost">
                  <i class="fa-solid fa-download mr-1"></i> Baixar imagem
                </button>
              </div>
            </div>

            <div class="grid grid-cols-1 gap-4">
              <div class="preview-container">
                <img id="personalPreviewImage" alt="Imagem pessoal gerada" class="preview-img" />
              </div>

              <div class="bg-slate-50 border border-slate-200 rounded-2xl p-4">
                <p class="text-xs text-slate-500 mb-2"><i class="fa-solid fa-hashtag"></i> Legenda + Hashtags (se houver)</p>
                <pre id="personalCaptionOutput" class="whitespace-pre-wrap text-sm leading-relaxed text-slate-800"></pre>

                <div class="flex flex-wrap gap-2 mt-4 border-t border-slate-200 pt-3">
                  <button type="button" onclick="variantPersonal('short')" class="btn-ghost text-purple-600 border-purple-200">
                    üîÑ Mais Curto
                  </button>
                  <button type="button" onclick="variantPersonal('formal')" class="btn-ghost text-purple-600 border-purple-200">
                    üëî Mais Formal
                  </button>
                  <button type="button" onclick="variantPersonal('persuasive')" class="btn-ghost text-purple-600 border-purple-200">
                    üî• Mais Persuasivo
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- CRIAR CONTE√öDO COMERCIAL -->
    <section id="create" class="p-4 sm:p-6 lg:p-8 hidden-section">
      <div class="mb-6 flex items-center justify-between gap-3">
        <div>
          <h2 class="text-2xl font-bold text-slate-900">Criar novo conte√∫do (Comercial)</h2>
          <p class="text-sm text-slate-600">
            Defina marca, formato e briefing. A IA entrega post completo com visual + legenda.
          </p>
        </div>
        <button
          type="button"
          onclick="goBackToDashboard()"
          class="inline-flex items-center text-xs sm:text-sm text-slate-600 hover:text-slate-900 bg-slate-100 hover:bg-slate-200 px-3 py-2 rounded-2xl"
        >
          <i class="fa-solid fa-arrow-left mr-2"></i> Voltar ao painel
        </button>
      </div>

      <div class="flex flex-col xl:flex-row gap-8">
        <div class="w-full xl:w-1/2 space-y-6">
          <div class="card bg-white p-5">
            <div class="flex items-center justify-between mb-2">
              <label class="block text-sm font-bold text-slate-800">1. Selecione a Marca</label>
              <span class="text-[11px] text-slate-500">Passo 1 de 4</span>
            </div>
            <select id="createBrandSelect" class="w-full p-3"></select>
            <p id="brandHint" class="text-xs text-slate-500 mt-2">Cadastre uma marca para personalizar.</p>
          </div>

          <div class="card bg-white p-5 space-y-4">
            <div>
              <div class="flex items-center justify-between mb-2">
                <label class="block text-sm font-bold text-slate-800">2. Tipo de Conte√∫do</label>
                <span class="text-[11px] text-slate-500">Passo 2 de 4</span>
              </div>
              <div class="grid grid-cols-2 md:grid-cols-3 gap-2">
                <button type="button" class="content-type-btn p-3 text-xs font-semibold text-slate-700" data-content="instagram">
                  <i class="fa-brands fa-instagram mr-1"></i> Post Instagram
                </button>
                <button type="button" class="content-type-btn p-3 text-xs font-semibold text-slate-700" data-content="facebook">
                  <i class="fa-brands fa-facebook mr-1"></i> Post Facebook
                </button>
                <button type="button" class="content-type-btn p-3 text-xs font-semibold text-slate-700" data-content="site">
                  <i class="fa-solid fa-globe mr-1"></i> Para Site
                </button>
                <button type="button" class="content-type-btn p-3 text-xs font-semibold text-slate-700" data-content="video">
                  <i class="fa-solid fa-video mr-1"></i> Roteiro V√≠deo
                </button>
                <button type="button" class="content-type-btn p-3 text-xs font-semibold text-slate-700" data-content="copy">
                  <i class="fa-solid fa-bullseye mr-1"></i> Copy Vendas
                </button>
              </div>
              <p id="typeHint" class="text-xs text-slate-500 mt-2">Selecione um tipo para continuar.</p>
            </div>

            <div>
              <div class="flex items-center justify-between mb-2">
                <label class="block text-sm font-bold text-slate-800">3. Objetivo</label>
                <span class="text-[11px] text-slate-500">Passo 3 de 4</span>
              </div>
              <select id="objectiveSelect" class="w-full p-3">
                <option>Vender</option>
                <option>Engajar</option>
                <option>Educar</option>
              </select>
            </div>
          </div>

          <div class="card bg-white p-5">
            <div class="flex items-center justify-between mb-2">
              <label class="block text-sm font-bold text-slate-800">3. Briefing: O que comunicar?</label>
              <span class="text-[11px] text-slate-500">Passo 4 de 4</span>
            </div>
            <textarea id="briefingInput" class="w-full p-4" rows="5" placeholder="Ex: Divulgar promo√ß√£o de final de semana, explicar o benef√≠cio principal, destacar um diferencial, etc."></textarea>
          </div>

          <div class="card bg-white p-5">
            <label class="block text-sm font-bold text-slate-800 mb-2">4. Imagens de Refer√™ncia (Opcional)</label>
            <div class="p-4 dropzone text-center relative group">
              <input type="file" id="referenceImages" name="referenceImages" multiple accept="image/*" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10">
              <div class="pointer-events-none group-hover:scale-105 transition-transform">
                <i class="fa-solid fa-cloud-arrow-up text-2xl text-slate-400 mb-2"></i>
                <p class="text-sm text-slate-600 font-medium">Clique ou arraste at√© 3 imagens</p>
                <p class="text-xs text-slate-400 mt-1">Logo, posts antigos, identidade visual...</p>
              </div>
            </div>
            <p id="fileStatus" class="text-xs text-blue-600 font-medium mt-2 text-center"></p>

            <div class="mt-4 flex items-start gap-3 p-3 bg-blue-50 rounded-xl border border-blue-100">
              <div class="flex h-6 items-center">
                <input id="recreateCheck" type="checkbox" class="h-5 w-5 rounded border-slate-300 text-blue-600 focus:ring-blue-600">
              </div>
              <div class="text-sm">
                <label for="recreateCheck" class="font-medium text-blue-900 cursor-pointer">Usar imagem como base (Recriar)</label>
                <p class="text-slate-600 text-xs">
                  Mant√©m a mesma cena e objetos da foto, √∫til para melhorar fotos de produtos ou pratos.
                </p>
              </div>
            </div>
          </div>

          <button type="button" onclick="generatePostComplete()" class="w-full btn-accent justify-center mt-2 text-sm sm:text-base">
            ‚ú® Gerar Conte√∫do Estrat√©gico
          </button>

          <p class="text-xs text-slate-500 mt-3">
            Dica: inclua <strong>pre√ßo</strong>, <strong>prazo</strong>, <strong>condi√ß√£o</strong> e <strong>CTA</strong>.
          </p>
        </div>

        <div class="w-full xl:w-1/2">
          <div id="resultArea" class="card bg-white h-full p-8 flex flex-col justify-center items-center text-center">
            <div class="text-slate-400">
              <div class="w-14 h-14 rounded-3xl bg-slate-50 border border-slate-200 flex items-center justify-center mx-auto mb-4">
                <i class="fa-solid fa-robot text-2xl"></i>
              </div>
              <p class="font-semibold text-slate-600">Aguardando briefing‚Ä¶</p>
              <p class="text-sm text-slate-500 mt-1">Preencha os dados e clique em <strong>Gerar</strong>.</p>
            </div>
          </div>

          <div id="finalContent" class="hidden card bg-white h-full p-6">
            <div class="flex flex-wrap justify-between items-center gap-2 mb-4 border-b border-slate-200 pb-3">
              <h3 class="font-bold text-slate-800">Resultado gerado</h3>
              <div class="flex gap-2">
                <button type="button" onclick="copyCaption()" class="btn-ghost">
                  <i class="fa-solid fa-copy mr-1"></i> Copiar legenda
                </button>
                <button type="button" onclick="downloadImage()" class="btn-ghost">
                  <i class="fa-solid fa-download mr-1"></i> Baixar imagem
                </button>
              </div>
            </div>

            <div class="grid grid-cols-1 gap-4">
              <div class="preview-container">
                <img id="previewImage" alt="Imagem do post" class="preview-img" />
              </div>

              <div class="bg-slate-50 border border-slate-200 rounded-2xl p-4">
                <p class="text-xs text-slate-500 mb-2"><i class="fa-solid fa-hashtag"></i> Legenda + Hashtags</p>
                <pre id="captionOutput" class="whitespace-pre-wrap text-sm leading-relaxed text-slate-800"></pre>
              </div>

              <div class="flex flex-wrap gap-2">
                <button type="button" onclick="variant('short')" class="btn-ghost text-blue-600 border-blue-200">
                  üîÑ Mais Curto
                </button>
                <button type="button" onclick="variant('formal')" class="btn-ghost text-blue-600 border-blue-200">
                  üëî Mais Formal
                </button>
                <button type="button" onclick="variant('persuasive')" class="btn-ghost text-blue-600 border-blue-200">
                  üî• Mais Persuasivo
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- PERFIL -->
    <section id="profile" class="p-4 sm:p-6 lg:p-8 hidden-section">
      <div class="mb-6 flex items-center justify-between gap-3">
        <div>
          <h2 class="text-2xl font-bold text-slate-900">Meu Perfil</h2>
          <p class="text-sm text-slate-600">
            Gerencie suas informa√ß√µes de acesso.
          </p>
        </div>
        <button
          type="button"
          onclick="goBackToDashboard()"
          class="inline-flex items-center text-xs sm:text-sm text-slate-600 hover:text-slate-900 bg-slate-100 hover:bg-slate-200 px-3 py-2 rounded-2xl"
        >
          <i class="fa-solid fa-arrow-left mr-2"></i> Voltar ao painel
        </button>
      </div>

      <div class="card bg-white p-6 sm:p-8 max-w-xl">
        <div class="space-y-5">
          <div class="flex items-center justify-between mb-4">
            <div class="flex items-center gap-4">
              <div class="w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center text-slate-400 text-2xl font-bold border border-slate-200">
                <i class="fa-solid fa-user"></i>
              </div>
              <div>
                <p class="text-sm font-medium text-slate-900">Avatar do usu√°rio</p>
                <p class="text-xs text-slate-500">Gerado automaticamente pelo sistema</p>
              </div>
            </div>
            <div class="hidden sm:flex flex-col items-end gap-1">
              <span class="text-[11px] text-slate-500">Perfil</span>
              <div class="w-24 progress-shell">
                <div class="progress-bar" style="width: 60%;"></div>
              </div>
              <span class="text-[10px] text-slate-400">Complete seus dados para chegar a 100%</span>
            </div>
          </div>

          <div>
            <label class="block text-sm font-semibold text-slate-700 mb-2">Nome de exibi√ß√£o</label>
            <input
              id="profileNameInput"
              type="text"
              class="w-full p-3"
              placeholder="Seu nome completo"
            />
          </div>

          <div>
            <label class="block text-sm font-semibold text-slate-700 mb-2">E-mail de acesso</label>
            <input
              id="profileEmailInput"
              type="email"
              class="w-full p-3 bg-slate-100 text-slate-500 cursor-not-allowed"
              disabled
              placeholder="email@exemplo.com"
            />
            <p class="text-[11px] text-slate-400 mt-1">O e-mail n√£o pode ser alterado manualmente.</p>
          </div>

          <div class="pt-2 flex flex-col sm:flex-row gap-3">
            <button
              onclick="saveUserProfile()"
              class="btn-accent"
              type="button"
            >
              <i class="fa-solid fa-check mr-1"></i> Salvar altera√ß√µes
            </button>

            <!-- üî¥ NOVO: bot√£o sair da conta dentro da p√°gina de Perfil -->
            <button
              type="button"
              onclick="document.getElementById('btnLogout')?.click()"
              class="inline-flex items-center justify-center rounded-2xl px-4 py-2.5 text-sm font-semibold bg-red-600 text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 focus:ring-offset-2 focus:ring-offset-slate-50"
            >
              <i class="fa-solid fa-arrow-right-from-bracket mr-2"></i>
              Sair da conta
            </button>
          </div>

        </div>
      </div>
    </section>

    <!-- ASSINATURA -->
    <section id="billing" class="p-4 sm:p-6 lg:p-8 hidden-section">
      <div class="mb-6 flex items-center justify-between gap-3">
        <div>
          <h2 class="text-2xl font-bold text-slate-900">Assinatura</h2>
          <p class="text-sm text-slate-600">
            Veja o status do seu per√≠odo de teste e do plano Pro.
          </p>
        </div>
        <button
          type="button"
          onclick="goBackToDashboard()"
          class="inline-flex items-center text-xs sm:text-sm text-slate-600 hover:text-slate-900 bg-slate-100 hover:bg-slate-200 px-3 py-2 rounded-2xl"
        >
          <i class="fa-solid fa-arrow-left mr-2"></i> Voltar ao painel
        </button>
      </div>

      <div class="max-w-2xl space-y-6">

        <div class="card bg-white p-6 flex flex-col gap-4">
          <div class="flex items-center justify-between gap-4">
            <div>
              <p class="text-xs font-semibold text-indigo-600 uppercase tracking-wide">
                Per√≠odo de teste Free
              </p>
              <p class="text-sm text-slate-800 mt-1">
                Novos usu√°rios t√™m <strong>5 dias gratuitos</strong> para testar o painel.
              </p>
            </div>
            <span class="px-3 py-1 rounded-full text-xs bg-emerald-50 text-emerald-700 border border-emerald-200">
              Teste ativo
            </span>
          </div>

          <div class="space-y-2">
            <div class="flex items-center justify-between text-[11px] text-slate-500">
              <span>Progresso do teste</span>
              <span id="billingTrialLabel">Calculando‚Ä¶</span>
            </div>
            <div class="progress-shell">
              <div id="billingTrialProgress" class="progress-bar"></div>
            </div>
          </div>

          <p id="billingTrialInfo" class="text-xs text-slate-600">
            Voc√™ ainda tem <strong>5 dias de teste gratuito</strong>. Aproveite para gerar conte√∫dos,
            cadastrar marcas e sentir se o NexoraAI faz sentido para o seu dia a dia.
          </p>

          <p class="text-[11px] text-slate-400">
            Ap√≥s o fim do per√≠odo de teste, para continuar usando o painel sem limita√ß√µes,
            basta assinar o plano <strong>Pro</strong> por <strong>R$ 49,90/m√™s</strong>.
          </p>
        </div>

        <div class="card bg-white p-6 flex flex-col gap-3">
          <div class="flex items-center justify-between gap-4">
            <div>
              <p class="text-sm font-medium text-slate-800">Plano atual</p>
              <p id="billingPlanInfo" class="text-sm text-slate-500 mt-1">
                Carregando informa√ß√µes do plano...
              </p>
            </div>
            <span
              id="billingPlanBadge"
              class="inline-flex items-center px-3 py-1 rounded-full text-xs bg-slate-100 text-slate-700"
            >
              ‚Äî
            </span>
          </div>

          <button
            type="button"
            id="btnBillingRefresh"
            class="inline-flex items-center justify-center rounded-2xl bg-slate-900 px-4 py-2.5 text-sm font-semibold text-white hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-2 focus:ring-offset-slate-100 transition w-max"
          >
            Atualizar status
          </button>
        </div>

        <div class="feature-panel bg-gradient-to-br from-indigo-600 to-purple-700 text-white p-6 border border-slate-200/0">
          <h3 class="font-semibold mb-2">NexoraAI Pro ‚Äì R$ 49,90/m√™s</h3>
          <ul class="text-sm space-y-1 opacity-95 mb-4">
            <li>‚Ä¢ Gera√ß√£o ilimitada dentro do uso justo</li>
            <li>‚Ä¢ Salvar marcas e hist√≥rico de conte√∫dos</li>
            <li>‚Ä¢ Prioridade nas filas de gera√ß√£o</li>
          </ul>
          <button
            type="button"
            id="btnBillingCheckout"
            class="btn-accent bg-white text-indigo-800"
          >
            Assinar / Gerenciar plano
          </button>
          <p class="mt-2 text-[11px] text-white/80">
            Ao clicar, voc√™ ser√° redirecionado para a p√°gina de pagamento configurada.
          </p>
        </div>
      </div>
    </section>
  </main>

  <!-- NAV MOBILE FIXO -->
  <nav class="fixed bottom-0 inset-x-0 z-40 bg-slate-900/95 border-t border-slate-800/70 backdrop-blur-lg lg:hidden">
    <div class="max-w-5xl mx-auto px-2 py-1.5 flex items-center justify-between gap-1 text-[10px] text-slate-200">

      <button
        class="nav-mobile-btn flex-1 flex flex-col items-center gap-1 py-1"
        onclick='document.querySelector("[data-section=dashboard]").click()'
      >
        <span class="w-8 h-8 rounded-full flex items-center justify-center bg-slate-800">
          <i class="fa-solid fa-chart-pie text-xs"></i>
        </span>
        <span>Dashboard</span>
      </button>

      <button
        class="nav-mobile-btn flex-1 flex flex-col items-center gap-1 py-1"
        onclick='document.querySelector("[data-section=create-mode]").click()'
      >
        <span class="w-8 h-8 rounded-full flex items-center justify-center bg-slate-800">
          <i class="fa-solid fa-pen-nib text-xs"></i>
        </span>
        <span>Criar</span>
      </button>

      <button
        class="nav-mobile-btn flex-1 flex flex-col items-center gap-1 py-1"
        onclick='document.querySelector("[data-section=brands]").click()'
      >
        <span class="w-8 h-8 rounded-full flex items-center justify-center bg-slate-800">
          <i class="fa-solid fa-briefcase text-xs"></i>
        </span>
        <span>Marcas</span>
      </button>

      <button
        class="nav-mobile-btn flex-1 flex flex-col items-center gap-1 py-1"
        onclick='document.querySelector("[data-section=templates]").click()'
      >
        <span class="w-8 h-8 rounded-full flex items-center justify-center bg-slate-800">
          <i class="fa-solid fa-wand-magic-sparkles text-xs"></i>
        </span>
        <span>Sugest√µes</span>
      </button>

      <button
        class="nav-mobile-btn flex-1 flex flex-col items-center gap-1 py-1"
        onclick='document.querySelector("[data-section=history]").click()'
      >
        <span class="w-8 h-8 rounded-full flex items-center justify-center bg-slate-800">
          <i class="fa-solid fa-clock-rotate-left text-xs"></i>
        </span>
        <span>Hist√≥rico</span>
      </button>

      <button
        class="nav-mobile-btn flex-1 flex flex-col items-center gap-1 py-1"
        onclick='document.querySelector("[data-section=profile]").click()'
      >
        <span class="w-8 h-8 rounded-full flex items-center justify-center bg-slate-800">
          <i class="fa-regular fa-user text-xs"></i>
        </span>
        <span>Perfil</span>
      </button>

      <button
        class="nav-mobile-btn flex-1 flex flex-col items-center gap-1 py-1"
        onclick='document.querySelector("[data-section=billing]").click()'
      >
        <span class="w-8 h-8 rounded-full flex items-center justify-center bg-slate-800">
          <i class="fa-regular fa-credit-card text-xs"></i>
        </span>
        <span>Plano</span>
      </button>

    </div>
  </nav>

  <script>
    function goBackToDashboard() {
      const el = document.querySelector('[data-section="dashboard"]');
      if (el) el.click();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function openProfileFromMobile() {
      const profileMenuItem = document.querySelector('[data-section="profile"]');
      if (profileMenuItem) {
        profileMenuItem.click();
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
    }

    // ‚úÖ NOVO: faz a engrenagem do desktop abrir/fechar o painel de usu√°rio
    document.addEventListener('DOMContentLoaded', () => {
      const btn = document.getElementById('userSettingsBtn');
      const panel = document.getElementById('userProfilePanel');
      if (btn && panel && !btn.dataset.bound) {
        btn.dataset.bound = '1';
        btn.addEventListener('click', () => {
          panel.classList.toggle('hidden');
        });
      }
    });

    // L√≥gica do Per√≠odo de Teste
    (function initTrialBanner() {
      const TRIAL_DAYS = 5;

      const infoEl = document.getElementById('billingTrialInfo');
      const labelEl = document.getElementById('billingTrialLabel');
      const barEl  = document.getElementById('billingTrialProgress');

      if (!infoEl || !labelEl || !barEl) return;

      let stored = localStorage.getItem('nexora_trial_start');
      if (!stored) {
        stored = new Date().toISOString();
        localStorage.setItem('nexora_trial_start', stored);
      }

      const startDate = new Date(stored);
      const now = new Date();
      const diffMs = now - startDate;

      const usedDays = Math.min(
        TRIAL_DAYS,
        Math.max(0, Math.floor(diffMs / (1000 * 60 * 60 * 24)))
      );

      const remaining = Math.max(0, TRIAL_DAYS - usedDays);
      const percent = (usedDays / TRIAL_DAYS) * 100;

      barEl.style.width = `${Math.max(5, Math.min(100, percent || 5))}%`;

      if (remaining > 0) {
        labelEl.textContent = `${usedDays}/${TRIAL_DAYS} dias usados`;
        infoEl.innerHTML =
          `Voc√™ ainda tem <strong>${remaining} dia${remaining > 1 ? 's' : ''}</strong> de teste gratuito. `;
        return;
      }

      labelEl.textContent = `5/5 dias usados`;
      infoEl.innerHTML =
        `Seu per√≠odo de teste gratuito terminou. Para continuar utilizando o NexoraAI, ` +
        `assine o <strong>Plano Pro</strong>. Voc√™ ser√° redirecionado automaticamente‚Ä¶`;

      setTimeout(() => {
        const billingMenu = document.querySelector('[data-section="billing"]');
        if (billingMenu) billingMenu.click();
      }, 3000);
    })();
  </script>

  <script src="./js/nexoraai-panel.js"></script>
</body>
</html>
